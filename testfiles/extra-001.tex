\documentclass{article}
\usepackage[b5paper,margin=1cm]{geometry}
\pagestyle{empty}

\input{regression-test}

% avoid font size substitution messages from "LaTeX Font Info"
\usepackage{type1cm,type1ec}

\usepackage{array}
\usepackage{tabularray}
\usepackage{environ}

\SetTblrTracing{none}
\UseTblrLibrary{hook}

\begin{document}

\START
\hrule\bigskip

\BEGINTEST{testing expand option}
\def\tblrrowa{
	20 & 30 & 40 \\ }
\def\tblrrowb{
	50 & 60 & 70 \\ }
\def\tblrbody{
 \hline
  \tblrrowa
  \tblrrowb
 \hline
}
\SetTblrOuter{expand=\tblrbody\tblrrowa}
\begin{tblr}[expand+=\tblrrowb]{ccc}
 \hline
  AA & BB & CC \\
  \tblrbody
  DD & EE & FF \\
  \tblrbody
  GG & HH & II \\
 \hline
\end{tblr}
\ENDTEST

\bigskip\hrule\bigskip

\BEGINTEST{testing \NewEnviron}
\NewEnviron{fancytblr}[1]{
 Before Text
 \begin{tblr}[expand=\BODY]{#1}
   \BODY
 \end{tblr}
 After Text
}
\begin{fancytblr}{hlines}
  One   & Two   & Three \\
  Four  & Five  & Six   \\
  Seven & Eight & Nine  \\
\end{fancytblr}
\ENDTEST

\end{document}
